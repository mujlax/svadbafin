<!doctype html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Все персональные странички</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Comic+Neue:wght@300;400;700&display=swap" rel="stylesheet">
	<style>
		:root { --bg:#100030; --card:#fffdf5; --ink:#101010; }
		body { margin:0; font-family:'Comic Neue', Arial, sans-serif; background:linear-gradient(135deg,#120055,#000); color:#fff; }
		.container { max-width: 980px; margin: 0 auto; padding: 24px 16px 64px; }
		.title { font-family:'Press Start 2P', monospace; text-align:center; margin:16px 0 24px; text-shadow:0 0 8px #fff, 0 0 20px #ff00d4; }
		.card { background:var(--card); color:var(--ink); border:4px outset #ffe5f7; border-radius:8px; box-shadow:6px 6px 0 #000; padding:16px; }
		.list { display:grid; grid-template-columns: repeat(auto-fill,minmax(240px,1fr)); gap:12px; }
		.user { background:#fff; border:3px double #000; box-shadow:3px 3px 0 #000; padding:12px; }
		.user b { display:block; margin-bottom:6px; }
		.user a { display:inline-block; margin-right:8px; margin-bottom:6px; color:#120055; font-weight:700; text-decoration:none; }
		.user a:hover { text-decoration:underline; }
		.note { opacity:.8; margin-top:8px; font-size:14px; }
	</style>
</head>
<body>
	<div class="container">
		<h1 class="title">Список персональных страниц</h1>
		<div class="card">
			<div id="list" class="list">Загрузка пользователей...</div>
			<div class="note">Подсказка: формат ссылок — как через параметр, так и через путь.</div>
		</div>
	</div>
	<script>
		(async function(){
			const base = location.origin
			try {
				const res = await fetch(base + '/users.json')
				const data = await res.json()
				const users = Object.keys(data)
				const container = document.getElementById('list')
				container.innerHTML = ''
				users.forEach((u) => {
					const el = document.createElement('div')
					el.className = 'user'
					el.innerHTML = '<b>' + u + '</b>'
					const a1 = document.createElement('a')
					a1.href = base + '/?u=' + encodeURIComponent(u)
					a1.textContent = 'Параметр: ?u=' + u
					const a2 = document.createElement('a')
					a2.href = base + '/' + encodeURIComponent(u)
					a2.textContent = 'Путь: /' + u
					el.appendChild(a1)
					el.appendChild(a2)
					container.appendChild(el)
				})
			} catch (e) {
				document.getElementById('list').textContent = 'Не удалось загрузить users.json'
			}
		})();
	</script>
</body>
</html>
